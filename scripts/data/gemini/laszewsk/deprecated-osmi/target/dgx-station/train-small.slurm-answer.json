{
    "application": "Singularity",
    "details": {
        "resource_requirements": {
            "nodes": 1,
            "tasks": 1,
            "time": "02:00:00",
            "partition": "bii-gpu",
            "account": "bii_dsc_community",
            "gres": "gpu:a100:1",
            "job_name": "small-train-osmi",
            "output": "train-osmi-%u-%j.out",
            "error": "train-osmi-%u-%j.err",
            "reservation": "bi_fox_dgx",
            "constraint": "a100_80gb"
        },
        "software": {
            "modules": [
                "singularity",
                "tensorflow/2.10.0",
                "gcc",
                "openmpi",
                "python"
            ],
            "container": {
                "name": "cloudmesh-rivanna",
                "image": "$RUN_DIR/$NAME.sif"
            },
            "environment": {
                "name": "ENV3",
                "source": "$PROJECT_DIR/ENV3/bin/activate"
            }
        },
        "script_commands": [
            "nvidia-smi",
            "cd $MODEL_DIR",
            "MODEL=small_lstm",
            "time singularity exec --nv $RUN_DIR/$NAME.sif python train.py $MODEL"
        ]
    }
}