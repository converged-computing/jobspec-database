{
    "application": "COBALT",
    "details": {
        "resource_requirements": {
            "nodes": 2,
            "walltime": "0:10:00",
            "queue": "full-node",
            "filesystems": "home",
            "mode": "script"
        },
        "environment_variables": {
            "FI_MR_CACHE_MAX_COUNT": 0,
            "FI_OFI_RXM_USE_SRX": 1,
            "WANDB_MODE": "offline",
            "LD_LIBRARY_PATH": "/home/tbouvier/view/thetagpu/lib;/home/tbouvier/view/thetagpu/lib64;/home/tbouvier/view/thetagpu/lib/python3.10/site-packages/torch/lib;/lus/theta-fs0/software/thetagpu/openmpi/openmpi-4.1.4_ucx-1.14.0_gcc-9.4.0_cuda-11.4/lib;/usr/local/cuda-11/lib64",
            "PATH": "path to user's PATH variable"
        },
        "software": {
            "spack": {
                "source": "${HOME}/git/spack-thetagpu/share/spack/setup-env.sh",
                "env": "/home/tbouvier/git/spack-envs/thetagpu"
            },
            "mpiexec": {
                "command": "mpiexec -np 16 -npernode 8 -hostfile $COBALT_NODEFILE -bind-to none -map-by slot -x NCCL_DEBUG=INFO -x LD_LIBRARY_PATH -x WANDB_MODE -x PATH",
                "arguments": [
                    "python",
                    "../../main.py",
                    "--yaml-config experiments_thetagpu.yaml",
                    "--config er_ghostnet_scale",
                    "--log-level info",
                    "--nsys-run"
                ]
            },
            "nsys": {
                "command": "nsys profile --trace=cuda,nvtx",
                "arguments": [
                    "mpiexec -np 16 -npernode 8 -hostfile $COBALT_NODEFILE -bind-to none -map-by slot -x NCCL_DEBUG=INFO -x LD_LIBRARY_PATH -x WANDB_MODE -x PATH python ../../main.py --yaml-config experiments_thetagpu.yaml --config er_ghostnet_scale --log-level info --nsys-run"
                ]
            }
        }
    }
}