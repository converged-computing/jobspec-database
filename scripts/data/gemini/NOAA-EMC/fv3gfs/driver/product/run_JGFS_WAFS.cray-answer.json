{
    "application": "LSF",
    "details": {
        "job_name": "gfs_wafs",
        "working_directory": "/gpfs/hps/ptmp/Yali.Mao",
        "output_file": "/gpfs/hps/ptmp/Yali.Mao/gfs_wafs.o%J",
        "error_file": "/gpfs/hps/ptmp/Yali.Mao/gfs_wafs.o%J",
        "queue": "debug",
        "wall_time": "00:30",
        "project": "GFS-T2O",
        "memory": "500",
        "resources": "1*{select[craylinux && !vnode]} + 1*{select[craylinux && vnode]span[ptile=1] cu[type=cabinet]}",
        "modules": [
            "iobuf",
            "PrgEnv-intel",
            "ESMF-intel-haswell/3_1_0rp5",
            "cfp-intel-sandybridge",
            "iobuf",
            "craype-hugepages2M",
            "craype-haswell",
            "prod_envir",
            "prod_util",
            "prod_util/1.0.4",
            "grib_util/1.0.3"
        ],
        "environment_variables": [
            "OMP_NUM_THREADS=1",
            "KMP_AFFINITY=disabled",
            "OMP_STACKSIZE=1024m",
            "MP_LABELIO=yes",
            "MP_STDOUTMODE=ordered",
            "envir=para",
            "cyc=${cyc:-00}",
            "fcsthrs=30",
            "job=gfs_wafs_f${fcsthrs}_${cyc}",
            "NET=gfs",
            "RUN=gfs",
            "gfs_ver=v4.0.0",
            "pid=${pid:-$$}",
            "jobid=${job}.${pid}",
            "PDY=`cut -c 7-14 $COMROOT/date/t00z`",
            "PDY=20161101",
            "USER=`whoami`",
            "SENDCOM=YES",
            "SENDDBN=NO",
            "SENDDBN_NTC=NO",
            "KEEPDATA=YES",
            "COMROOT=/gpfs/hps/emc/global/noscrub/Yali.Mao/datainput/com2",
            "PCOMROOT=/gpfs/hps/ptmp/${USER}/pcom",
            "NWROOT=/gpfs/hps/emc/global/noscrub/Yali.Mao/project",
            "DATAROOT=/gpfs/hps/ptmp/${USER}",
            "DATA=${DATA:-${DATAROOT}/${jobid}}",
            "PCOM=${PCOM:-$PCOMROOT/${NET}}",
            "COMOUT=/gpfs/hps/ptmp/${USER}/gfs_wafs.$PDY",
            "COMIN=$COMROOT/gfs/$envir/gfs.$PDY",
            "jlogfile=/$DATA/jlogfile.${jobid}",
            "HOMEgfs=${HOMEgfs:-${NWROOT}/wafs_cray.${gfs_ver}}"
        ],
        "commands": [
            "sh $HOMEgfs/jobs/JGFS_WAFS"
        ],
        "post_processing": {
            "compare_files": [
                {
                    "source": "$PCOM",
                    "target": "/gpfs/gp1/ptmp/Yali.Mao/pcomop",
                    "diff_command": "/gpfs/hps/emc/global/noscrub/Yali.Mao/save/bin/diffgb -x"
                },
                {
                    "source": "$COMOUT",
                    "target": "/gpfs/gp2/nco/ops/com/gfs/prod/gfs.$PDY",
                    "diff_command": "/gpfs/hps/emc/global/noscrub/Yali.Mao/save/bin/diffgb -x"
                }
            ],
            "additional_comparisons": {
                "user": "Yali.Mao",
                "stdout": "/com/${NET}/$envir/${RUN}.${PDY}",
                "stdpcom": {
                    "prod": "/pcom/gfs",
                    "other": "/pcom/${envir}/gfs"
                },
                "gid_list": [
                    37,
                    38,
                    39,
                    40,
                    41,
                    42,
                    43,
                    44
                ],
                "comparison_types": [
                    {
                        "source": "$COMOUT/wafs${NET}${gid}.t${cyc}z.gribf${fcsthrs}",
                        "target": "$stdout/wafs${NET}${gid}.t${cyc}z.gribf${fcsthrs}",
                        "command": "cmp"
                    },
                    {
                        "source": "$COMOUT/wafs${NET}${gid}.t${cyc}z.gribf${fcsthrs}.grib2",
                        "target": "$stdout/wafs${NET}${gid}.t${cyc}z.gribf${fcsthrs}.grib2",
                        "command": "cmp"
                    },
                    {
                        "source": "$PCOM/com.wafs${cyc}${fhr}${sets}.$job",
                        "target": "$stdpcom/com.wafs${cyc}${fhr}${sets}.$job",
                        "command": "cmp",
                        "conditions": [
                            "fcsthrs -eq 30",
                            "sets=b",
                            "fhr in 12 18 24 30"
                        ]
                    },
                    {
                        "source": "$PCOM/xtrn.wfs${NET}${cyc}${fhr}${sets}.$job",
                        "target": "$stdpcom/xtrn.wfs${NET}${cyc}${fhr}${sets}.$job",
                        "command": "cmp",
                        "conditions": [
                            "fcsthrs -eq 30",
                            "sets=b",
                            "fhr in 12 18 24 30"
                        ]
                    },
                    {
                        "source": "$PCOM/com.wafs${cyc}${fhr}${sets}.$job",
                        "target": "$stdpcom/com.wafs${cyc}${fhr}${sets}.$job",
                        "command": "cmp",
                        "conditions": [
                            "fcsthrs -eq 30",
                            "sets=",
                            "fhr in 00 06"
                        ]
                    },
                    {
                        "source": "$PCOM/xtrn.wfs${NET}${cyc}${fhr}${sets}.$job",
                        "target": "$stdpcom/xtrn.wfs${NET}${cyc}${fhr}${sets}.$job",
                        "command": "cmp",
                        "conditions": [
                            "fcsthrs -eq 30",
                            "sets=",
                            "fhr in 00 06"
                        ]
                    },
                    {
                        "source": "$PCOM/com.wafs${cyc}${fcsthrs}${sets}.$job",
                        "target": "$stdpcom/com.wafs${cyc}${fcsthrs}${sets}.$job",
                        "command": "cmp",
                        "conditions": [
                            "fcsthrs -ge 12",
                            "fcsthrs -le 30",
                            "sets=a"
                        ]
                    },
                    {
                        "source": "$PCOM/xtrn.wfs${NET}${cyc}${fcsthrs}${sets}.$job",
                        "target": "$stdpcom/xtrn.wfs${NET}${cyc}${fcsthrs}${sets}.$job",
                        "command": "cmp",
                        "conditions": [
                            "fcsthrs -ge 12",
                            "fcsthrs -le 30",
                            "sets=a"
                        ]
                    },
                    {
                        "source": "$PCOM/com.wafs${cyc}${fcsthrs}${sets}.$job",
                        "target": "$stdpcom/com.wafs${cyc}${fcsthrs}${sets}.$job",
                        "command": "cmp",
                        "conditions": [
                            "fcsthrs -ge 36",
                            "sets="
                        ]
                    },
                    {
                        "source": "$PCOM/xtrn.wfs${NET}${cyc}${fcsthrs}${sets}.$job",
                        "target": "$stdpcom/xtrn.wfs${NET}${cyc}${fcsthrs}${sets}.$job",
                        "command": "cmp",
                        "conditions": [
                            "fcsthrs -ge 36",
                            "sets="
                        ]
                    }
                ]
            }
        }
    }
}