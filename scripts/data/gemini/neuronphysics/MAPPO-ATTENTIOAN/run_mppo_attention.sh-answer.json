{
    "application": "SLURM",
    "details": {
        "job_name": "MAPPO",
        "nodes": 1,
        "tasks_per_node": 1,
        "cpus_per_task": 16,
        "gpus": "v100:4",
        "memory": "95000M",
        "time": "1-10:00:00",
        "account": "def-gdumas85",
        "output_file": "/home/memole/projects/def-gdumas85/memole/MPPO-ATTENTIOAN/logs/MAPPO-attention-seed-1_%N-%j.out",
        "error_file": "/home/memole/projects/def-gdumas85/memole/MPPO-ATTENTIOAN/logs/MAPPO-attention-seed-1_%N-%j.err",
        "mail_user": "sheikhbahaee@gmail.com",
        "mail_type": "END,FAIL",
        "modules": [
            "gcc",
            "python/3.10",
            "opencv/4.7",
            "mujoco",
            "mpi4py",
            "scipy-stack",
            "rust/1.65.0"
        ],
        "virtualenv": "/home/memole/MAPPO",
        "python_packages": [
            "numpy",
            "torch",
            "torchvision",
            "torchtext",
            "torchaudio",
            "wandb",
            "mpi4py",
            "mpyq",
            "torch-ac",
            "mkl_fft",
            "mkl_random",
            "dm-env",
            "pygame",
            "dmlab2d",
            "libcst",
            "dm-acme"
        ],
        "environment_variables": {
            "DIR": "/home/memole/projects/def-gdumas85/memole/MPPO-ATTENTIOAN",
            "SC2PATH": "/home/memole/projects/def-gdumas85/memole/MPPO-ATTENTIOAN/3rdparty/StarCraftII",
            "MAP_DIR": "/content/drive/MyDrive/MPPO-ATTENTIOAN/3rdparty/StarCraftII/Maps/",
            "OMP_NUM_THREADS": "$SLURM_CPUS_PER_TASK"
        },
        "commands": [
            "cd /home/memole/projects/def-gdumas85/memole/MPPO-ATTENTIOAN/",
            "pip install -e .",
            "mkdir 3rdparty",
            "export SC2PATH=\"/home/memole/projects/def-gdumas85/memole/MPPO-ATTENTIOAN/3rdparty/StarCraftII\"",
            "cd 3rdparty",
            "echo 'SC2PATH is set to '$SC2PATH",
            "wget http://blzdistsc2-a.akamaihd.net/Linux/SC2.4.10.zip",
            "unzip -P iagreetotheeula SC2.4.10.zip",
            "rm -rf SC2.4.10.zip",
            "export MAP_DIR=\"/content/drive/MyDrive/MPPO-ATTENTIOAN/3rdparty/StarCraftII/Maps/\"",
            "echo 'MAP_DIR is set to '$MAP_DIR",
            "mkdir -p $MAP_DIR",
            "cd ..",
            "wget https://github.com/oxwhirl/smac/releases/download/v0.1-beta1/SMAC_Maps.zip",
            "unzip SMAC_Maps.zip",
            "mv SMAC_Maps $MAP_DIR",
            "rm -rf SMAC_Maps.zip",
            "echo \"Install Hanabi....\"",
            "cd $DIR/onpolicy/envs/hanabi/",
            "cmake -B _build -S .",
            "cmake --build _build",
            "python -c 'import pyhanabi'",
            "export OMP_NUM_THREADS=$SLURM_CPUS_PER_TASK",
            "python3 -m pip install --upgrade pip setuptools psutil wheel",
            "pip install --no-index --no-cache-dir gfootball",
            "pip install dm-env",
            "pip install pygame",
            "wget https://files.pythonhosted.org/packages/4b/31/884879224de4627b5d45b307cec8f4cd1e60db9aa61871e4aa2518c6584b/dmlab2d-1.0.0_dev.10-cp310-cp310-manylinux_2_31_x86_64.whl -O dmlab2d-1.0.0_dev.10-cp310-cp310-linux_x86_64.whl",
            "setrpaths.sh --path dmlab2d-1.0.0_dev.10-cp310-cp310-linux_x86_64.whl",
            "pip install dmlab2d-1.0.0_dev.10-cp310-cp310-linux_x86_64.whl",
            "pip install --no-index libcst",
            "git clone -b main https://github.com/deepmind/meltingpot",
            "cd meltingpot",
            "pip install --editable .[dev]",
            "pip install  --no-index --no-cache-dir dm-acme",
            "wandb login a2a1bab96ebbc3869c65e3632485e02fcae9cc42",
            "echo \"Start running the train_mpe_comm.sh script ...\"",
            "cd $DIR/onpolicy/scripts/train",
            "CUDA_VISIBLE_DEVICES=0,1 python train_mpe.py --use_valuenorm --use_popart --env_name \"MPE\" --algorithm_name \"mappo\" --experiment_name \"check\" \\",
            "    --scenario_name \"simple_speaker_listener\" --num_agents 2 --num_landmarks 3 --seed 1 --use_render \\",
            "    --n_training_threads 1 --n_rollout_threads 128 --num_mini_batch 1 --episode_length 25 --num_env_steps 2000000 \\",
            "    --ppo_epoch 15 --gain 0.01 --lr 7e-4 --critic_lr 7e-4 --use_wandb --user_name \"zsheikhb\" --wandb_name \"zsheikhb\" --share_policy"
        ]
    }
}