{
    "application": "MPI",
    "details": {
        "job_name": "mpi_job_test",
        "cpus_per_task": 1,
        "nodes": 2,
        "ntasks_per_node": 128,
        "output": "mpi_test_%j.log",
        "environment": {
            "SRUN_CPUS_PER_TASK": "${SLURM_CPUS_PER_TASK}",
            "OSU_VERSION": "7.1-1",
            "OSU_ARCHIVE": "osu-micro-benchmarks-7.1-1.tar.gz",
            "OSU_URL": "https://mvapich.cse.ohio-state.edu/download/mvapich/osu-micro-benchmarks-7.1-1.tar.gz"
        },
        "dependencies": {
            "openmpi": "spack load /xgcbqft",
            "osu_micro_benchmarks": "https://mvapich.cse.ohio-state.edu/download/mvapich/osu-micro-benchmarks-7.1-1.tar.gz"
        },
        "commands": [
            "wget https://mvapich.cse.ohio-state.edu/download/mvapich/osu-micro-benchmarks-7.1-1.tar.gz",
            "tar -xvf ${OSU_ARCHIVE}",
            "spack load /xgcbqft",
            "cd ${OSU_ARCHIVE//.tar.gz/}",
            "./configure CC=$(which mpicc) CXX=$(which mpicxx)",
            "make",
            "cd ..",
            "srun  ${OSU_ARCHIVE//.tar.gz/}/c/mpi/collective/blocking/osu_alltoall"
        ],
        "resources": {
            "slurm": true,
            "srun": true
        }
    }
}