{
    "application": "MPI",
    "software": [
        "Python",
        "mpi4py",
        "torchrun",
        "conda",
        "nvidia-smi"
    ],
    "resource_requirements": {
        "nodes": 10,
        "walltime": "1:00:00",
        "filesystems": [
            "home",
            "grand"
        ],
        "queue": "prod",
        "account": "STlearn",
        "environment_variables": {
            "MPICH_GPU_SUPPORT_ENABLED": "1",
            "NCCL_COLLNET_ENABLE": "1",
            "NCCL_NET_GDR_LEVEL": "PHB",
            "MASTER_ADDR": "hostname of the node",
            "NNODES": "number of nodes",
            "NRANKS_PER_NODE": "number of ranks per node",
            "NTOTRANKS": "total number of ranks",
            "NDEPTH": "number of cores/threads to space MPI ranks apart on each node",
            "OMP_NUM_THREADS": "number of OpenMP threads per MPI rank",
            "OMP_PLACES": "threads"
        },
        "libraries": [
            "conda environment 3DCNN"
        ],
        "commands": [
            "set_affinity_cmd: ./scripts/polaris/set_affinity_gpu_polaris.sh",
            "Command: python main.py --step 3 --lr_init_phase3 1e5 --batch_size_phase3 1 --exp_name con_loss --fine_tune_task regression --target age --image_path /lus/grand/projects/STlearn/HCP_MNI_to_TRs  --use_cont_loss True --dataset_split_num 1 --model_weights_path_phase2 './experiments/S1200_transformer_reconstruction_sex_con_loss/S1200_transformer_reconstruction_sex_con_loss_epoch_18_batch_index_1118_BEST_val_loss.pth'"
        ],
        "system": "polaris"
    }
}