{
    "application": "MPI",
    "details": {
        "software": [
            "PBS",
            "mpiexec",
            "conda",
            "python",
            "nvidia-smi",
            "set_affinity_cmd"
        ],
        "resource_requirements": {
            "nodes": 10,
            "system": "polaris",
            "placement": "scatter",
            "walltime": "3:00:00",
            "filesystems": [
                "home",
                "grand"
            ],
            "queue": "prod",
            "account": "STlearn",
            "job_dependency": "oe"
        },
        "environment_variables": [
            "MPICH_GPU_SUPPORT_ENABLED",
            "NCCL_COLLNET_ENABLE",
            "NCCL_NET_GDR_LEVEL",
            "MASTER_ADDR",
            "NNODES",
            "NRANKS_PER_NODE",
            "NTOTRANKS",
            "NDEPTH",
            "OMP_NUM_THREADS",
            "OMP_PLACES"
        ],
        "commands": [
            "module load conda",
            "conda activate 3DCNN",
            "cd /lus/grand/projects/STlearn/4D_fMRI_Transformer/",
            "mpiexec -n ${NTOTRANKS} --ppn ${NRANKS_PER_NODE} --depth=${NDEPTH} --cpu-bind depth  $set_affinity_cmd $Command"
        ]
    }
}