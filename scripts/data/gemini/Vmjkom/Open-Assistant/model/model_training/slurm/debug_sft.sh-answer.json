{
    "application": "SLURM",
    "details": {
        "job_name": "debug_sft_small",
        "account": "project_462000241",
        "partition": "dev-g",
        "cores": 4,
        "nodes": 1,
        "gpus_per_node": 2,
        "tasks_per_node": 1,
        "memory": "200G",
        "time": "01:00:00",
        "output": "logs/%x-%j.out",
        "error": "logs/%x-%j.err",
        "modules": [
            "LUMI/22.08",
            "partition/G",
            "rocm/5.2.3",
            "aws-ofi-rccl/rocm-5.2.3",
            "pytorch"
        ],
        "environment_variables": [
            "TORCH_EXTENSIONS_DIR=/tmp/$USER/torch_extensions",
            "CACHE=/scratch/project_462000241/$USER/cache",
            "MODEL_PATH=/scratch/project_462000241/$USER/oa_models/debug",
            "LOGS=/scratch/project_462000241/$USER/logs",
            "PYTORCH_ROCM_ARCH=gfx90a",
            "LOCAL_RANK=$SLURM_LOCALID",
            "RANK=$SLURM_PROCID",
            "WORLD_SIZE=$((SLURM_GPUS_ON_NODE*SLURM_NNODES))",
            "NCCL_DEBUG=INFO",
            "NCCL_DEBUG_SUBSYS=INIT,GRAPH,ENV",
            "TORCH_DISTRIBUTED_DEBUG=DETAIL",
            "TRANSFORMERS_NO_ADVISORY_WARNINGS=1",
            "TOKENIZERS_PARALLELISM=true",
            "OMP_NUM_THREADS=$SLURM_CPUS_PER_TASK"
        ],
        "python_script": "trainer_sft.py",
        "configs": "gpt3-finnish-small",
        "cache_dir": "$CACHE",
        "output_dir": "$MODEL_PATH/$SLURM_JOB_NAME",
        "log_dir": "$LOGS",
        "local_rank": "$LOCAL_RANK",
        "report_to": "tensorboard"
    }
}