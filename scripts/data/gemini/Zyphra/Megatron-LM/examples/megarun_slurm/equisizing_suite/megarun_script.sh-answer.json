{
    "application": "slurm",
    "details": {
        "job_name": "megarun",
        "nodes": 2,
        "docker_image": "zyphra/megatron_experimental:latest",
        "docker_command": "/opt/Megatron-LM/examples/megarun_slurm/moe_1p3B_8E_bare.sh",
        "docker_options": {
            "network": "host",
            "ipc": "host",
            "privileged": true,
            "shm_size": "1800gb",
            "gpus": "all",
            "expose": 2222,
            "rm": true,
            "env": {
                "NCCL_IB_HCA": "mlx5_0,mlx5_3,mlx5_4,mlx5_5,mlx5_6,mlx5_7,mlx5_8,mlx5_9",
                "NCCL_IB_CUDA_SUPPORT": "1"
            },
            "volumes": [
                "/mnt/shared/datasets/:/datasets",
                "/mnt/shared/checkpoints/:/checkpoints",
                "/mnt/shared/code/megarun/Megatron-LM/:/opt/Megatron-LM"
            ]
        },
        "slurm_options": {
            "output": "/mnt/shared/slurm_logs/megarun.log"
        }
    }
}