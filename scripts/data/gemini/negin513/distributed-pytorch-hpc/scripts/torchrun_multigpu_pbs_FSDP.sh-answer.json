{
    "application": "Torchrun",
    "details": {
        "scheduler": "PBS",
        "queue": "main",
        "walltime": "01:00:00",
        "nodes": 2,
        "mpiprocs": 1,
        "ncpus": 64,
        "ngpus": 4,
        "memory": "480GB",
        "modules": [
            "nvhpc",
            "cuda",
            "cray-mpich",
            "conda"
        ],
        "conda_env": "evidential",
        "environment_variables": [
            "LSCRATCH=/glade/derecho/scratch/$USER/",
            "LOGLEVEL=INFO",
            "NCCL_DEBUG=INFO",
            "MPICH_GPU_MANAGED_MEMORY_SUPPORT_ENABLED=1",
            "MPICH_OFI_NIC_POLICY=GPU",
            "NCCL_SOCKET_IFNAME=hsn",
            "NCCL_HOME=/glade/u/home/dhoward/work/nccl-ofi-plugin/install",
            "LD_LIBRARY_PATH=$NCCL_HOME/lib:$NCCL_HOME/plugin/lib:$LD_LIBRARY_PATH",
            "NCCL_NCHANNELS_PER_NET_PEER=4",
            "MPICH_GPU_SUPPORT_ENABLED=1",
            "MPICH_RDMA_ENABLED_CUDA=1",
            "NCCL_DISABLE_IB=1",
            "NCCL_CROSS_NIC=1",
            "FI_CXI_DISABLE_HOST_REGISTER=1",
            "FI_CXI_OPTIMIZED_MRS=false"
        ],
        "mpi_command": "mpiexec",
        "mpi_options": "-n 2 --ppn 1 --cpu-bind none",
        "torchrun_options": "--nnodes=2 --nproc-per-node=4 --rdzv-backend=c10d --rdzv-endpoint=$head_node_ip",
        "python_script": "multigpu_resnet.py"
    }
}