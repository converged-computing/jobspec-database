{
    "application": "Slurm",
    "details": {
        "job_name": "principled-pre-training",
        "nodes": 1,
        "gpus": 2,
        "cpus_per_task": 32,
        "account": "nlp",
        "partition": "nlp",
        "nodes_list": "nlp-ada-1,nlp-ada-2,nlp-a40-1",
        "output_file": "fine_tuning_runs/slurm_%N_%j_out.txt",
        "error_file": "fine_tuning_runs/slurm_%N_%j_err.txt",
        "mail_type": "fail",
        "mail_user": "zachary@campus.technion.ac.il",
        "virtual_environment": ".depth/bin/activate",
        "environment_variables": {
            "DS_SKIP_CUDA_CHECK": "1",
            "OMP_NUM_THREADS": "$SLURM_CPUS_PER_TASK"
        },
        "software": "deepspeed",
        "training_script": "train_encoder_decoder.py",
        "training_mode": "ft",
        "training_parameters": {
            "num_gpus": 2,
            "num_cpus": 32,
            "precision": "bf16",
            "model.model_implementation": "hf_t5",
            "model.compile": "false",
            "data.input_length": 512,
            "data.target_length": 32,
            "data.num_workers": 32,
            "data.data_collator": "custom_t5",
            "downstream.benchmark_constants": "OfekGlick/DiscoEval",
            "downstream.benchmark_dataset": "SParxiv",
            "dataset.streaming": "false",
            "optim.name": "adamw_torch",
            "optim.base_lr": "1e-5",
            "optim.batch_size": 64,
            "optim.total_steps": "1_500",
            "optim.warmup_steps": 100,
            "optim.grad_acc": 1,
            "optim.lr_scheduler": "linear",
            "checkpoint.checkpoint_path": "checkpoints/pre_train/from_pretrained/hf_t5/allenai/c4_en/lr_0_0001_inverse_sqrt_bsz_200_shuffle_p_0_5/2024-04-03_20-31/checkpoint-256000",
            "checkpoint.resume": "false",
            "checkpoint.every_steps": "4_000",
            "checkpoint.save_total_limit": 3,
            "logging.every_steps": 10,
            "logging.wandb": "true",
            "evaluate.every_steps": 100
        },
        "baseline_parameters": {
            "num_gpus": 2,
            "num_cpus": 32,
            "precision": "bf16",
            "model.model_implementation": "hf_t5",
            "model.compile": "false",
            "data.input_length": 512,
            "data.target_length": 32,
            "data.num_workers": 32,
            "data.data_collator": "custom_t5",
            "downstream.benchmark_constants": "OfekGlick/DiscoEval",
            "downstream.benchmark_dataset": "SParxiv",
            "dataset.streaming": "false",
            "optim.name": "adamw_torch",
            "optim.base_lr": "1e-5",
            "optim.batch_size": 64,
            "optim.total_steps": "1_500",
            "optim.warmup_steps": 100,
            "optim.grad_acc": 1,
            "optim.lr_scheduler": "linear",
            "checkpoint.every_steps": "4_000",
            "checkpoint.save_total_limit": 3,
            "logging.every_steps": 10,
            "logging.wandb": "true",
            "evaluate.every_steps": 100
        }
    }
}