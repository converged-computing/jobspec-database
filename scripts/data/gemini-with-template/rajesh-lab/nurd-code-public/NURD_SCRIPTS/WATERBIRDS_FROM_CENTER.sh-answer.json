{
    "application": "nurd",
    "software": [
        "nurd_reweighting.py"
    ],
    "modules": [
        "/home/apm470/.bashrc"
    ],
    "environment_variables": {
        "MODIFIER": "$1",
        "GPUTYPE": "$2",
        "WORKERS": "2",
        "BS": "300",
        "DIST_EPOCHS": "5",
        "NR_EPOCHS": "10",
        "NUM_FOLDS": "5",
        "AMD_PYTHON_STRING": "/scratch/apm470/py38_amd/bin/python",
        "NVIDIA_PYTHON_STRING": "/scratch/apm470/py38_nvidia/bin/python",
        "DATASET": "waterbirds",
        "MODEL": "resnet_color",
        "IMGSIZE": "224",
        "GPUSTRING": ":mi50",
        "PYTHON_STRING": "/scratch/apm470/py38_amd/bin/python",
        "PREFIX": "ERM_FROM_CENTER_${method}_${DATASET}_BS${BS}_seed${SEED}_RHOTEST0${RHO_TEST}_BORDER${BORDER}_allwd001_glr0005_FINAL",
        "ARGS_STRING": "--prefix=$PREFIX --dataset=$DATASET --workers=0 --dist_epochs=$DIST_EPOCHS --nr_epochs=$NR_EPOCHS --nr_batch_size=$BS --dist_batch_size=$BS --seed=$SEED --rho=0.9 --img_side=$IMGSIZE --label_balance_method=downsample --rho_test=0.${RHO_TEST} --border=$BORDER --pred_model_type=$MODEL --weight_model_type=$MODEL --num_folds=$NUM_FOLDS --theta_lr=0.001 --gamma_lr=0.0005 --phi_lr=0.001 --nr_lr=0.001 --dist_decay=0.01 --phi_decay=0.01 --nr_decay=0.01 --nr_strategy=$method --debug=2",
        "COMMAND_STRING": "eval '$PYTHON_STRING nurd_reweighting.py $ARGS_STRING --add_pred_suffix=_ERM --exact --coeff=0.5 --lambda_=0 --max_lambda_=0 --frac_phi_steps=0 --randomrestart=-1 --pred_from_center > SBATCH_LOGS/${PREFIX}_WeightedERM.log'\n\n                    ",
        "SBATCH_STRING": "#!/bin/bash\n#SBATCH --job-name=$PREFIX\n#SBATCH --open-mode=truncate\n#SBATCH --output=./SBATCH_LOGS/$PREFIX.out\n#SBATCH --error=./SBATCH_LOGS/$PREFIX.err\n#SBATCH --export=ALL\n#SBATCH --time=00:20:00\n#SBATCH --gres=gpu${GPUSTRING}:1\n#SBATCH --mem=30G\n#SBATCH -c $WORKERS\n\n    source /home/apm470/.bashrc\n    cd /scratch/apm470/projects/nuisance-orthogonal-prediction/code/nurd/\n\n    eval $COMMAND_STRING\n\n    "
    },
    "resources": {
        "gres": "gpu:1",
        "cpus_per_task": null,
        "tasks": null,
        "ntasks_per_code": null,
        "gpus": "1",
        "gpus_per_node": null,
        "cores_per_socket": null,
        "gpus_per_task": null,
        "exclusive": null,
        "cpus_per_gpu": null,
        "gpu_type": "mi50",
        "time": "00:20:00",
        "ntasks_per_node": null,
        "nodes": null,
        "memory": "30G",
        "sockets_per_node": null,
        "ntasks_per_socket": null,
        "mem_per_gpu": null,
        "mem_per_cpu": null,
        "gres_flags": ""
    },
    "versions": {}
}